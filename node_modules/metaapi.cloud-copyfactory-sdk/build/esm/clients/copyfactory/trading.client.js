'use strict';
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function _async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
import MetaApiClient from '../metaapi.client';
import SubscriberSignalClient from './subscriberSignal.client';
import StrategySignalClient from './strategySignal.client';
import StopoutListenerManager from './streaming/stopoutListenerManager';
import UserLogListenerManager from './streaming/userLogListenerManager';
let TradingClient = class TradingClient extends MetaApiClient {
    /**
   * Resynchronizes the account. See
   * https://metaapi.cloud/docs/copyfactory/restApi/api/trading/resynchronize/
   * @param {String} accountId account id
   * @param {Array<String>} [strategyIds] array of strategy ids to recynchronize. Default is to synchronize all
   * strategies
   * @param {Array<String>} [positionIds] array of position ids to resynchronize. Default is to synchronize all
   * positions
   * @return {Promise} promise which resolves when resynchronization is scheduled
   */ resynchronize(accountId, strategyIds, positionIds) {
        var _this = this;
        return _async_to_generator(function*() {
            if (_this._isNotJwtToken()) {
                return _this._handleNoAccessError('resynchronize');
            }
            const opts = {
                url: `/users/current/subscribers/${accountId}/resynchronize`,
                method: 'POST',
                headers: {
                    'auth-token': _this._token
                },
                params: {
                    strategyId: strategyIds,
                    positionId: positionIds
                },
                json: true
            };
            return _this._domainClient.requestCopyFactory(opts);
        })();
    }
    /**
   * Generates an instance of signal client for a subscriber
   * @param {String} subscriberId subscriber account id
   */ getSubscriberSignalClient(subscriberId) {
        var _this = this;
        return _async_to_generator(function*() {
            if (_this._isNotJwtToken()) {
                return _this._handleNoAccessError('getSubscriberSignalClient');
            }
            let accountData = yield _this._domainClient.getAccountInfo(subscriberId);
            const host = yield _this._domainClient.getSignalClientHost(accountData.regions);
            return new SubscriberSignalClient(accountData.id, host, _this._domainClient);
        })();
    }
    /**
   * Generates an instance of signal client for a strategy
   * @param {String} strategyId strategy id
   */ getStrategySignalClient(strategyId) {
        var _this = this;
        return _async_to_generator(function*() {
            if (_this._isNotJwtToken()) {
                return _this._handleNoAccessError('getStrategySignalClient');
            }
            const strategy = yield _this._configurationClient.getStrategy(strategyId);
            const accountData = yield _this._domainClient.getAccountInfo(strategy.accountId);
            const host = yield _this._domainClient.getSignalClientHost(accountData.regions);
            return new StrategySignalClient(accountData.id, strategyId, host, _this._domainClient);
        })();
    }
    /**
   * CopyFactory strategy stopout reason
   * @typedef {'day-balance-difference' | 'date-balance-difference' | 'week-balance-difference' |
   * 'week-to-date-balance-difference' | 'month-balance-difference' | 'month-to-date-balance-difference' |
   * 'quarter-balance-difference' | 'quarter-to-date-balance-difference' | 'year-balance-difference' |
   * 'year-to-date-balance-difference' | 'lifetime-balance-difference' | 'day-balance-minus-equity' |
   * 'date-balance-minus-equity' | 'week-balance-minus-equity' | 'week-to-date-balance-minus-equity' |
   * 'month-balance-minus-equity' | 'month-to-date-balance-minus-equity' |
   * 'quarter-balance-minus-equity' | 'quarter-to-date-balance-minus-equity' | 'year-balance-minus-equity' |
   * 'year-to-date-balance-minus-equity' | 'lifetime-balance-minus-equity' |
   * 'day-equity-difference' | 'date-equity-difference' | 'week-equity-difference' |
   * 'week-to-date-equity-difference' | 'month-equity-difference' |
   * 'month-to-date-equity-difference' | 'quarter-equity-difference' | 'quarter-to-date-equity-difference' |
   * 'year-equity-difference' | 'year-to-date-equity-difference' |
   * 'lifetime-equity-difference'} CopyFactoryStrategyStopoutReason
   */ /**
   * CopyFactory strategy stopout
   * @typedef {Object} CopyFactoryStrategyStopout
   * @property {String} subscriberId subscriber id
   * @property {CopyFactoryStrategyIdAndName} strategy strategy which was stopped out
   * @property {Boolean} partial flag indicating that stopout is partial
   * @property {CopyFactoryStrategyStopoutReason} reason stopout reason
   * @property {String} reasonDescription human-readable description of the stopout reason
   * @property {Boolean} [closePositions] flag indicating if positions should be closed
   * @property {Date} stoppedAt time the strategy was stopped at
   * @property {Date} stoppedTill time the strategy is stopped till
   * @property {Number} sequenceNumber stopout event sequence number
   */ /**
   * Returns subscriber account stopouts. See
   * https://metaapi.cloud/docs/copyfactory/restApi/api/trading/getStopOuts/
   * @param {String} subscriberId subscriber id
   * @return {Promise<Array<CopyFactoryStrategyStopout>>} promise which resolves with stopouts found
   */ getStopouts(subscriberId) {
        var _this = this;
        return _async_to_generator(function*() {
            if (_this._isNotJwtToken()) {
                return _this._handleNoAccessError('getStopouts');
            }
            const opts = {
                url: `/users/current/subscribers/${subscriberId}/stopouts`,
                method: 'GET',
                headers: {
                    'auth-token': _this._token
                },
                json: true
            };
            return _this._domainClient.requestCopyFactory(opts);
        })();
    }
    /**
   * Resets subscription stopouts. See
   * https://metaapi.cloud/docs/copyfactory/restApi/api/trading/resetSubscriptionStopOuts/
   * @param {String} subscriberId subscriber id
   * @param {String} strategyId strategy id
   * @param {CopyFactoryStrategyStopoutReason} reason stopout reason to reset
   * yearly-equity, monthly-equity, daily-equity
   * @return {Promise} promise which resolves when the stopouts are reset
   */ resetSubscriptionStopouts(subscriberId, strategyId, reason) {
        if (this._isNotJwtToken()) {
            return this._handleNoAccessError('resetSubscriptionStopouts');
        }
        const opts = {
            url: `/users/current/subscribers/${subscriberId}/subscription-strategies/` + `${strategyId}/stopouts/${reason}/reset`,
            method: 'POST',
            headers: {
                'auth-token': this._token
            },
            json: true
        };
        return this._domainClient.requestCopyFactory(opts);
    }
    /**
   * Resets subscriber stopouts. See
   * https://metaapi.cloud/docs/copyfactory/restApi/api/trading/resetSubscriberStopOuts/
   * @param {String} subscriberId subscriber id
   * @param {CopyFactoryStrategyStopoutReason} reason stopout reason to reset
   * yearly-equity, monthly-equity, daily-equity
   * @return {Promise} promise which resolves when the stopouts are reset
   */ resetSubscriberStopouts(subscriberId, reason) {
        if (this._isNotJwtToken()) {
            return this._handleNoAccessError('resetSubscriberStopouts');
        }
        const opts = {
            url: `/users/current/subscribers/${subscriberId}/stopouts/${reason}/reset`,
            method: 'POST',
            headers: {
                'auth-token': this._token
            },
            json: true
        };
        return this._domainClient.requestCopyFactory(opts);
    }
    /**
   * Trade copying user log record
   * @typedef {Object} CopyFactoryUserLogMessage
   * @property {Date} time log record time
   * @property {string} [symbol] symbol traded
   * @property {string} [strategyId] id of the strategy event relates to
   * @property {string} [strategyName] name of the strategy event relates to
   * @property {string} [positionId] position id event relates to
   * @property {string} [side] side of the trade event relates to. One of buy, sell, close
   * @property {string} [type] type of the trade event relates to. One of market, limit, stop
   * @property {number} [openPrice] open price for limit and stop orders
   * @property {string} level log level. One of INFO, WARN, ERROR
   * @property {string} message log message
   */ /**
   * Returns copy trading user log for an account and time range. See
   * https://metaapi.cloud/docs/copyfactory/restApi/api/trading/getUserLog/
   * @param {String} subscriberId subscriber id
   * @param {Date} [startTime] time to start loading data from
   * @param {Date} [endTime] time to stop loading data at
   * @param {String} [strategyId] strategy id filter
   * @param {String} [positionId] position id filter
   * @param {'DEBUG'|'INFO'|'WARN'|'ERROR'} [level] minimum severity level
   * @param {Number} [offset] pagination offset. Default is 0
   * @param {Number} [limit] pagination limit. Default is 1000
   * @return {Promise<Array<CopyFactoryUserLogMessage>>} promise which resolves with log records found
   */ getUserLog(subscriberId, startTime, endTime, strategyId, positionId, level, offset = 0, limit = 1000) {
        var _this = this;
        return _async_to_generator(function*() {
            if (_this._isNotJwtToken()) {
                return _this._handleNoAccessError('getUserLog');
            }
            const opts = {
                url: `/users/current/subscribers/${subscriberId}/user-log`,
                method: 'GET',
                params: {
                    startTime,
                    endTime,
                    strategyId,
                    positionId,
                    level,
                    offset,
                    limit
                },
                headers: {
                    'auth-token': _this._token
                },
                json: true
            };
            let result = yield _this._domainClient.requestCopyFactory(opts, true);
            if (result) {
                result.map((r)=>r.time = new Date(r.time));
            }
            return result;
        })();
    }
    /**
   * Returns event log for CopyFactory strategy, sorted in reverse chronological order. See
   * https://metaapi.cloud/docs/copyfactory/restApi/api/trading/getStrategyLog/ 
   * @param {String} strategyId strategy id to retrieve log for
   * @param {Date} [startTime] time to start loading data from
   * @param {Date} [endTime] time to stop loading data at
   * @param {String} [positionId] position id filter
   * @param {'DEBUG'|'INFO'|'WARN'|'ERROR'} [level] minimum severity level
   * @param {Number} [offset] pagination offset. Default is 0
   * @param {Number} [limit] pagination limit. Default is 1000
   * @return {Promise<Array<CopyFactoryUserLogMessage>>} promise which resolves with log records found
   */ getStrategyLog(strategyId, startTime, endTime, positionId, level, offset = 0, limit = 1000) {
        var _this = this;
        return _async_to_generator(function*() {
            if (_this._isNotJwtToken()) {
                return _this._handleNoAccessError('getStrategyLog');
            }
            const opts = {
                url: `/users/current/strategies/${strategyId}/user-log`,
                method: 'GET',
                params: {
                    startTime,
                    endTime,
                    positionId,
                    level,
                    offset,
                    limit
                },
                headers: {
                    'auth-token': _this._token
                },
                json: true
            };
            let result = yield _this._domainClient.requestCopyFactory(opts, true);
            if (result) {
                result.map((r)=>r.time = new Date(r.time));
            }
            return result;
        })();
    }
    /**
   * Adds a stopout listener and creates a job to make requests
   * @param {StopoutListener} listener stopout listener
   * @param {String} [accountId] account id
   * @param {String} [strategyId] strategy id
   * @param {Number} [sequenceNumber] sequence number
   * @return {String} listener id
   */ addStopoutListener(listener, accountId, strategyId, sequenceNumber) {
        return this._stopoutListenerManager.addStopoutListener(listener, accountId, strategyId, sequenceNumber);
    }
    /**
   * Removes stopout listener and cancels the event stream
   * @param {String} listenerId stopout listener id
   */ removeStopoutListener(listenerId) {
        this._stopoutListenerManager.removeStopoutListener(listenerId);
    }
    /**
   * Adds a strategy log listener and creates a job to make requests
   * @param {UserLogListener} listener user log listener
   * @param {String} strategyId strategy id
   * @param {Date} [startTime] log search start time
   * @param {String} [positionId] position id filter
   * @param {'DEBUG'|'INFO'|'WARN'|'ERROR'} [level] minimum severity level
   * @param {Number} [limit] log pagination limit
   * @return {String} listener id
   */ addStrategyLogListener(listener, strategyId, startTime, positionId, level, limit) {
        return this._userLogListenerManager.addStrategyLogListener(listener, strategyId, startTime, positionId, level, limit);
    }
    /**
   * Removes strategy log listener and cancels the event stream
   * @param {String} listenerId strategy log listener id
   */ removeStrategyLogListener(listenerId) {
        this._userLogListenerManager.removeStrategyLogListener(listenerId);
    }
    /**
   * Adds a subscriber log listener and creates a job to make requests
   * @param {UserLogListener} listener user log listener
   * @param {String} subscriberId subscriber id
   * @param {Date} [startTime] log search start time
   * @param {string} [strategyId] strategy id filter
   * @param {string} [positionId] position id filter
   * @param {'DEBUG'|'INFO'|'WARN'|'ERROR'} [level] minimum severity level
   * @param {Number} [limit] log pagination limit
   * @return {String} listener id
   */ addSubscriberLogListener(listener, subscriberId, startTime, strategyId, positionId, level, limit) {
        return this._userLogListenerManager.addSubscriberLogListener(listener, subscriberId, startTime, strategyId, positionId, level, limit);
    }
    /**
   * Removes subscriber log listener and cancels the event stream
   * @param {String} listenerId subscriber log listener id
   */ removeSubscriberLogListener(listenerId) {
        this._userLogListenerManager.removeSubscriberLogListener(listenerId);
    }
    /**
   * Constructs CopyFactory trading API client instance
   * @param {DomainClient} domainClient domain client
   * @param {ConfigurationClient} configurationClient configuration client
   */ constructor(domainClient, configurationClient){
        super(domainClient);
        this._domainClient = domainClient;
        this._configurationClient = configurationClient;
        this._stopoutListenerManager = new StopoutListenerManager(domainClient);
        this._userLogListenerManager = new UserLogListenerManager(domainClient);
    }
};
/**
 * metaapi.cloud CopyFactory trading API (trade copying trading API) client (see
 * https://metaapi.cloud/docs/copyfactory/)
 */ export { TradingClient as default };

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjxhbm9uPiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBNZXRhQXBpQ2xpZW50IGZyb20gJy4uL21ldGFhcGkuY2xpZW50JztcbmltcG9ydCBTdWJzY3JpYmVyU2lnbmFsQ2xpZW50IGZyb20gJy4vc3Vic2NyaWJlclNpZ25hbC5jbGllbnQnO1xuaW1wb3J0IFN0cmF0ZWd5U2lnbmFsQ2xpZW50IGZyb20gJy4vc3RyYXRlZ3lTaWduYWwuY2xpZW50JztcbmltcG9ydCBTdG9wb3V0TGlzdGVuZXJNYW5hZ2VyIGZyb20gJy4vc3RyZWFtaW5nL3N0b3BvdXRMaXN0ZW5lck1hbmFnZXInO1xuaW1wb3J0IFVzZXJMb2dMaXN0ZW5lck1hbmFnZXIgZnJvbSAnLi9zdHJlYW1pbmcvdXNlckxvZ0xpc3RlbmVyTWFuYWdlcic7XG5cbi8qKlxuICogbWV0YWFwaS5jbG91ZCBDb3B5RmFjdG9yeSB0cmFkaW5nIEFQSSAodHJhZGUgY29weWluZyB0cmFkaW5nIEFQSSkgY2xpZW50IChzZWVcbiAqIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NvcHlmYWN0b3J5LylcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhZGluZ0NsaWVudCBleHRlbmRzIE1ldGFBcGlDbGllbnQge1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIENvcHlGYWN0b3J5IHRyYWRpbmcgQVBJIGNsaWVudCBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge0RvbWFpbkNsaWVudH0gZG9tYWluQ2xpZW50IGRvbWFpbiBjbGllbnRcbiAgICogQHBhcmFtIHtDb25maWd1cmF0aW9uQ2xpZW50fSBjb25maWd1cmF0aW9uQ2xpZW50IGNvbmZpZ3VyYXRpb24gY2xpZW50XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb21haW5DbGllbnQsIGNvbmZpZ3VyYXRpb25DbGllbnQpIHtcbiAgICBzdXBlcihkb21haW5DbGllbnQpO1xuICAgIHRoaXMuX2RvbWFpbkNsaWVudCA9IGRvbWFpbkNsaWVudDtcbiAgICB0aGlzLl9jb25maWd1cmF0aW9uQ2xpZW50ID0gY29uZmlndXJhdGlvbkNsaWVudDtcbiAgICB0aGlzLl9zdG9wb3V0TGlzdGVuZXJNYW5hZ2VyID0gbmV3IFN0b3BvdXRMaXN0ZW5lck1hbmFnZXIoZG9tYWluQ2xpZW50KTtcbiAgICB0aGlzLl91c2VyTG9nTGlzdGVuZXJNYW5hZ2VyID0gbmV3IFVzZXJMb2dMaXN0ZW5lck1hbmFnZXIoZG9tYWluQ2xpZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN5bmNocm9uaXplcyB0aGUgYWNjb3VudC4gU2VlXG4gICAqIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NvcHlmYWN0b3J5L3Jlc3RBcGkvYXBpL3RyYWRpbmcvcmVzeW5jaHJvbml6ZS9cbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjY291bnRJZCBhY2NvdW50IGlkXG4gICAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nPn0gW3N0cmF0ZWd5SWRzXSBhcnJheSBvZiBzdHJhdGVneSBpZHMgdG8gcmVjeW5jaHJvbml6ZS4gRGVmYXVsdCBpcyB0byBzeW5jaHJvbml6ZSBhbGxcbiAgICogc3RyYXRlZ2llc1xuICAgKiBAcGFyYW0ge0FycmF5PFN0cmluZz59IFtwb3NpdGlvbklkc10gYXJyYXkgb2YgcG9zaXRpb24gaWRzIHRvIHJlc3luY2hyb25pemUuIERlZmF1bHQgaXMgdG8gc3luY2hyb25pemUgYWxsXG4gICAqIHBvc2l0aW9uc1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gcmVzeW5jaHJvbml6YXRpb24gaXMgc2NoZWR1bGVkXG4gICAqL1xuICBhc3luYyByZXN5bmNocm9uaXplKGFjY291bnRJZCwgc3RyYXRlZ3lJZHMsIHBvc2l0aW9uSWRzKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90Snd0VG9rZW4oKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZU5vQWNjZXNzRXJyb3IoJ3Jlc3luY2hyb25pemUnKTtcbiAgICB9XG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIHVybDogYC91c2Vycy9jdXJyZW50L3N1YnNjcmliZXJzLyR7YWNjb3VudElkfS9yZXN5bmNocm9uaXplYCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXV0aC10b2tlbic6IHRoaXMuX3Rva2VuXG4gICAgICB9LFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHN0cmF0ZWd5SWQ6IHN0cmF0ZWd5SWRzLFxuICAgICAgICBwb3NpdGlvbklkOiBwb3NpdGlvbklkc1xuICAgICAgfSxcbiAgICAgIGpzb246IHRydWVcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl9kb21haW5DbGllbnQucmVxdWVzdENvcHlGYWN0b3J5KG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbiBpbnN0YW5jZSBvZiBzaWduYWwgY2xpZW50IGZvciBhIHN1YnNjcmliZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN1YnNjcmliZXJJZCBzdWJzY3JpYmVyIGFjY291bnQgaWRcbiAgICovXG4gIGFzeW5jIGdldFN1YnNjcmliZXJTaWduYWxDbGllbnQoc3Vic2NyaWJlcklkKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90Snd0VG9rZW4oKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZU5vQWNjZXNzRXJyb3IoJ2dldFN1YnNjcmliZXJTaWduYWxDbGllbnQnKTtcbiAgICB9XG5cbiAgICBsZXQgYWNjb3VudERhdGEgPSBhd2FpdCB0aGlzLl9kb21haW5DbGllbnQuZ2V0QWNjb3VudEluZm8oc3Vic2NyaWJlcklkKTtcbiAgICBjb25zdCBob3N0ID0gYXdhaXQgdGhpcy5fZG9tYWluQ2xpZW50LmdldFNpZ25hbENsaWVudEhvc3QoYWNjb3VudERhdGEucmVnaW9ucyk7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyU2lnbmFsQ2xpZW50KGFjY291bnREYXRhLmlkLCBob3N0LCB0aGlzLl9kb21haW5DbGllbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbiBpbnN0YW5jZSBvZiBzaWduYWwgY2xpZW50IGZvciBhIHN0cmF0ZWd5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJhdGVneUlkIHN0cmF0ZWd5IGlkXG4gICAqL1xuICBhc3luYyBnZXRTdHJhdGVneVNpZ25hbENsaWVudChzdHJhdGVneUlkKSB7XG4gICAgaWYgKHRoaXMuX2lzTm90Snd0VG9rZW4oKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZU5vQWNjZXNzRXJyb3IoJ2dldFN0cmF0ZWd5U2lnbmFsQ2xpZW50Jyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyYXRlZ3kgPSBhd2FpdCB0aGlzLl9jb25maWd1cmF0aW9uQ2xpZW50LmdldFN0cmF0ZWd5KHN0cmF0ZWd5SWQpO1xuICAgIGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgdGhpcy5fZG9tYWluQ2xpZW50LmdldEFjY291bnRJbmZvKHN0cmF0ZWd5LmFjY291bnRJZCk7XG4gICAgY29uc3QgaG9zdCA9IGF3YWl0IHRoaXMuX2RvbWFpbkNsaWVudC5nZXRTaWduYWxDbGllbnRIb3N0KGFjY291bnREYXRhLnJlZ2lvbnMpO1xuICAgIHJldHVybiBuZXcgU3RyYXRlZ3lTaWduYWxDbGllbnQoYWNjb3VudERhdGEuaWQsIHN0cmF0ZWd5SWQsIGhvc3QsIHRoaXMuX2RvbWFpbkNsaWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQ29weUZhY3Rvcnkgc3RyYXRlZ3kgc3RvcG91dCByZWFzb25cbiAgICogQHR5cGVkZWYgeydkYXktYmFsYW5jZS1kaWZmZXJlbmNlJyB8ICdkYXRlLWJhbGFuY2UtZGlmZmVyZW5jZScgfCAnd2Vlay1iYWxhbmNlLWRpZmZlcmVuY2UnIHxcbiAgICogJ3dlZWstdG8tZGF0ZS1iYWxhbmNlLWRpZmZlcmVuY2UnIHwgJ21vbnRoLWJhbGFuY2UtZGlmZmVyZW5jZScgfCAnbW9udGgtdG8tZGF0ZS1iYWxhbmNlLWRpZmZlcmVuY2UnIHxcbiAgICogJ3F1YXJ0ZXItYmFsYW5jZS1kaWZmZXJlbmNlJyB8ICdxdWFydGVyLXRvLWRhdGUtYmFsYW5jZS1kaWZmZXJlbmNlJyB8ICd5ZWFyLWJhbGFuY2UtZGlmZmVyZW5jZScgfFxuICAgKiAneWVhci10by1kYXRlLWJhbGFuY2UtZGlmZmVyZW5jZScgfCAnbGlmZXRpbWUtYmFsYW5jZS1kaWZmZXJlbmNlJyB8ICdkYXktYmFsYW5jZS1taW51cy1lcXVpdHknIHxcbiAgICogJ2RhdGUtYmFsYW5jZS1taW51cy1lcXVpdHknIHwgJ3dlZWstYmFsYW5jZS1taW51cy1lcXVpdHknIHwgJ3dlZWstdG8tZGF0ZS1iYWxhbmNlLW1pbnVzLWVxdWl0eScgfFxuICAgKiAnbW9udGgtYmFsYW5jZS1taW51cy1lcXVpdHknIHwgJ21vbnRoLXRvLWRhdGUtYmFsYW5jZS1taW51cy1lcXVpdHknIHxcbiAgICogJ3F1YXJ0ZXItYmFsYW5jZS1taW51cy1lcXVpdHknIHwgJ3F1YXJ0ZXItdG8tZGF0ZS1iYWxhbmNlLW1pbnVzLWVxdWl0eScgfCAneWVhci1iYWxhbmNlLW1pbnVzLWVxdWl0eScgfFxuICAgKiAneWVhci10by1kYXRlLWJhbGFuY2UtbWludXMtZXF1aXR5JyB8ICdsaWZldGltZS1iYWxhbmNlLW1pbnVzLWVxdWl0eScgfFxuICAgKiAnZGF5LWVxdWl0eS1kaWZmZXJlbmNlJyB8ICdkYXRlLWVxdWl0eS1kaWZmZXJlbmNlJyB8ICd3ZWVrLWVxdWl0eS1kaWZmZXJlbmNlJyB8XG4gICAqICd3ZWVrLXRvLWRhdGUtZXF1aXR5LWRpZmZlcmVuY2UnIHwgJ21vbnRoLWVxdWl0eS1kaWZmZXJlbmNlJyB8XG4gICAqICdtb250aC10by1kYXRlLWVxdWl0eS1kaWZmZXJlbmNlJyB8ICdxdWFydGVyLWVxdWl0eS1kaWZmZXJlbmNlJyB8ICdxdWFydGVyLXRvLWRhdGUtZXF1aXR5LWRpZmZlcmVuY2UnIHxcbiAgICogJ3llYXItZXF1aXR5LWRpZmZlcmVuY2UnIHwgJ3llYXItdG8tZGF0ZS1lcXVpdHktZGlmZmVyZW5jZScgfFxuICAgKiAnbGlmZXRpbWUtZXF1aXR5LWRpZmZlcmVuY2UnfSBDb3B5RmFjdG9yeVN0cmF0ZWd5U3RvcG91dFJlYXNvblxuICAgKi9cblxuICAvKipcbiAgICogQ29weUZhY3Rvcnkgc3RyYXRlZ3kgc3RvcG91dFxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBDb3B5RmFjdG9yeVN0cmF0ZWd5U3RvcG91dFxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gc3Vic2NyaWJlcklkIHN1YnNjcmliZXIgaWRcbiAgICogQHByb3BlcnR5IHtDb3B5RmFjdG9yeVN0cmF0ZWd5SWRBbmROYW1lfSBzdHJhdGVneSBzdHJhdGVneSB3aGljaCB3YXMgc3RvcHBlZCBvdXRcbiAgICogQHByb3BlcnR5IHtCb29sZWFufSBwYXJ0aWFsIGZsYWcgaW5kaWNhdGluZyB0aGF0IHN0b3BvdXQgaXMgcGFydGlhbFxuICAgKiBAcHJvcGVydHkge0NvcHlGYWN0b3J5U3RyYXRlZ3lTdG9wb3V0UmVhc29ufSByZWFzb24gc3RvcG91dCByZWFzb25cbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHJlYXNvbkRlc2NyaXB0aW9uIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHRoZSBzdG9wb3V0IHJlYXNvblxuICAgKiBAcHJvcGVydHkge0Jvb2xlYW59IFtjbG9zZVBvc2l0aW9uc10gZmxhZyBpbmRpY2F0aW5nIGlmIHBvc2l0aW9ucyBzaG91bGQgYmUgY2xvc2VkXG4gICAqIEBwcm9wZXJ0eSB7RGF0ZX0gc3RvcHBlZEF0IHRpbWUgdGhlIHN0cmF0ZWd5IHdhcyBzdG9wcGVkIGF0XG4gICAqIEBwcm9wZXJ0eSB7RGF0ZX0gc3RvcHBlZFRpbGwgdGltZSB0aGUgc3RyYXRlZ3kgaXMgc3RvcHBlZCB0aWxsXG4gICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBzZXF1ZW5jZU51bWJlciBzdG9wb3V0IGV2ZW50IHNlcXVlbmNlIG51bWJlclxuICAgKi9cblxuICAvKipcbiAgICogUmV0dXJucyBzdWJzY3JpYmVyIGFjY291bnQgc3RvcG91dHMuIFNlZVxuICAgKiBodHRwczovL21ldGFhcGkuY2xvdWQvZG9jcy9jb3B5ZmFjdG9yeS9yZXN0QXBpL2FwaS90cmFkaW5nL2dldFN0b3BPdXRzL1xuICAgKiBAcGFyYW0ge1N0cmluZ30gc3Vic2NyaWJlcklkIHN1YnNjcmliZXIgaWRcbiAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxDb3B5RmFjdG9yeVN0cmF0ZWd5U3RvcG91dD4+fSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdpdGggc3RvcG91dHMgZm91bmRcbiAgICovXG4gIGFzeW5jIGdldFN0b3BvdXRzKHN1YnNjcmliZXJJZCkge1xuICAgIGlmICh0aGlzLl9pc05vdEp3dFRva2VuKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVOb0FjY2Vzc0Vycm9yKCdnZXRTdG9wb3V0cycpO1xuICAgIH1cbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgdXJsOiBgL3VzZXJzL2N1cnJlbnQvc3Vic2NyaWJlcnMvJHtzdWJzY3JpYmVySWR9L3N0b3BvdXRzYCxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdGhpcy5fdG9rZW5cbiAgICAgIH0sXG4gICAgICBqc29uOiB0cnVlXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeShvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgc3Vic2NyaXB0aW9uIHN0b3BvdXRzLiBTZWVcbiAgICogaHR0cHM6Ly9tZXRhYXBpLmNsb3VkL2RvY3MvY29weWZhY3RvcnkvcmVzdEFwaS9hcGkvdHJhZGluZy9yZXNldFN1YnNjcmlwdGlvblN0b3BPdXRzL1xuICAgKiBAcGFyYW0ge1N0cmluZ30gc3Vic2NyaWJlcklkIHN1YnNjcmliZXIgaWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0cmF0ZWd5SWQgc3RyYXRlZ3kgaWRcbiAgICogQHBhcmFtIHtDb3B5RmFjdG9yeVN0cmF0ZWd5U3RvcG91dFJlYXNvbn0gcmVhc29uIHN0b3BvdXQgcmVhc29uIHRvIHJlc2V0XG4gICAqIHllYXJseS1lcXVpdHksIG1vbnRobHktZXF1aXR5LCBkYWlseS1lcXVpdHlcbiAgICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB3aGljaCByZXNvbHZlcyB3aGVuIHRoZSBzdG9wb3V0cyBhcmUgcmVzZXRcbiAgICovXG4gIHJlc2V0U3Vic2NyaXB0aW9uU3RvcG91dHMoc3Vic2NyaWJlcklkLCBzdHJhdGVneUlkLCByZWFzb24pIHtcbiAgICBpZiAodGhpcy5faXNOb3RKd3RUb2tlbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlTm9BY2Nlc3NFcnJvcigncmVzZXRTdWJzY3JpcHRpb25TdG9wb3V0cycpO1xuICAgIH1cbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgdXJsOiBgL3VzZXJzL2N1cnJlbnQvc3Vic2NyaWJlcnMvJHtzdWJzY3JpYmVySWR9L3N1YnNjcmlwdGlvbi1zdHJhdGVnaWVzL2AgK1xuICAgICAgICBgJHtzdHJhdGVneUlkfS9zdG9wb3V0cy8ke3JlYXNvbn0vcmVzZXRgLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdGhpcy5fdG9rZW5cbiAgICAgIH0sXG4gICAgICBqc29uOiB0cnVlXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeShvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgc3Vic2NyaWJlciBzdG9wb3V0cy4gU2VlXG4gICAqIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NvcHlmYWN0b3J5L3Jlc3RBcGkvYXBpL3RyYWRpbmcvcmVzZXRTdWJzY3JpYmVyU3RvcE91dHMvXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdWJzY3JpYmVySWQgc3Vic2NyaWJlciBpZFxuICAgKiBAcGFyYW0ge0NvcHlGYWN0b3J5U3RyYXRlZ3lTdG9wb3V0UmVhc29ufSByZWFzb24gc3RvcG91dCByZWFzb24gdG8gcmVzZXRcbiAgICogeWVhcmx5LWVxdWl0eSwgbW9udGhseS1lcXVpdHksIGRhaWx5LWVxdWl0eVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gdGhlIHN0b3BvdXRzIGFyZSByZXNldFxuICAgKi9cbiAgcmVzZXRTdWJzY3JpYmVyU3RvcG91dHMoc3Vic2NyaWJlcklkLCByZWFzb24pIHtcbiAgICBpZiAodGhpcy5faXNOb3RKd3RUb2tlbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlTm9BY2Nlc3NFcnJvcigncmVzZXRTdWJzY3JpYmVyU3RvcG91dHMnKTtcbiAgICB9XG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIHVybDogYC91c2Vycy9jdXJyZW50L3N1YnNjcmliZXJzLyR7c3Vic2NyaWJlcklkfS9zdG9wb3V0cy8ke3JlYXNvbn0vcmVzZXRgLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdGhpcy5fdG9rZW5cbiAgICAgIH0sXG4gICAgICBqc29uOiB0cnVlXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeShvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFkZSBjb3B5aW5nIHVzZXIgbG9nIHJlY29yZFxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBDb3B5RmFjdG9yeVVzZXJMb2dNZXNzYWdlXG4gICAqIEBwcm9wZXJ0eSB7RGF0ZX0gdGltZSBsb2cgcmVjb3JkIHRpbWVcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzeW1ib2xdIHN5bWJvbCB0cmFkZWRcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzdHJhdGVneUlkXSBpZCBvZiB0aGUgc3RyYXRlZ3kgZXZlbnQgcmVsYXRlcyB0b1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3N0cmF0ZWd5TmFtZV0gbmFtZSBvZiB0aGUgc3RyYXRlZ3kgZXZlbnQgcmVsYXRlcyB0b1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Bvc2l0aW9uSWRdIHBvc2l0aW9uIGlkIGV2ZW50IHJlbGF0ZXMgdG9cbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtzaWRlXSBzaWRlIG9mIHRoZSB0cmFkZSBldmVudCByZWxhdGVzIHRvLiBPbmUgb2YgYnV5LCBzZWxsLCBjbG9zZVxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3R5cGVdIHR5cGUgb2YgdGhlIHRyYWRlIGV2ZW50IHJlbGF0ZXMgdG8uIE9uZSBvZiBtYXJrZXQsIGxpbWl0LCBzdG9wXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BlblByaWNlXSBvcGVuIHByaWNlIGZvciBsaW1pdCBhbmQgc3RvcCBvcmRlcnNcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGxldmVsIGxvZyBsZXZlbC4gT25lIG9mIElORk8sIFdBUk4sIEVSUk9SXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtZXNzYWdlIGxvZyBtZXNzYWdlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNvcHkgdHJhZGluZyB1c2VyIGxvZyBmb3IgYW4gYWNjb3VudCBhbmQgdGltZSByYW5nZS4gU2VlXG4gICAqIGh0dHBzOi8vbWV0YWFwaS5jbG91ZC9kb2NzL2NvcHlmYWN0b3J5L3Jlc3RBcGkvYXBpL3RyYWRpbmcvZ2V0VXNlckxvZy9cbiAgICogQHBhcmFtIHtTdHJpbmd9IHN1YnNjcmliZXJJZCBzdWJzY3JpYmVyIGlkXG4gICAqIEBwYXJhbSB7RGF0ZX0gW3N0YXJ0VGltZV0gdGltZSB0byBzdGFydCBsb2FkaW5nIGRhdGEgZnJvbVxuICAgKiBAcGFyYW0ge0RhdGV9IFtlbmRUaW1lXSB0aW1lIHRvIHN0b3AgbG9hZGluZyBkYXRhIGF0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbc3RyYXRlZ3lJZF0gc3RyYXRlZ3kgaWQgZmlsdGVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcG9zaXRpb25JZF0gcG9zaXRpb24gaWQgZmlsdGVyXG4gICAqIEBwYXJhbSB7J0RFQlVHJ3wnSU5GTyd8J1dBUk4nfCdFUlJPUid9IFtsZXZlbF0gbWluaW11bSBzZXZlcml0eSBsZXZlbFxuICAgKiBAcGFyYW0ge051bWJlcn0gW29mZnNldF0gcGFnaW5hdGlvbiBvZmZzZXQuIERlZmF1bHQgaXMgMFxuICAgKiBAcGFyYW0ge051bWJlcn0gW2xpbWl0XSBwYWdpbmF0aW9uIGxpbWl0LiBEZWZhdWx0IGlzIDEwMDBcbiAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxDb3B5RmFjdG9yeVVzZXJMb2dNZXNzYWdlPj59IHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgd2l0aCBsb2cgcmVjb3JkcyBmb3VuZFxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlckxvZyhzdWJzY3JpYmVySWQsIHN0YXJ0VGltZSwgZW5kVGltZSwgc3RyYXRlZ3lJZCwgcG9zaXRpb25JZCwgbGV2ZWwsIG9mZnNldCA9IDAsIGxpbWl0ID0gMTAwMCkge1xuICAgIGlmICh0aGlzLl9pc05vdEp3dFRva2VuKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVOb0FjY2Vzc0Vycm9yKCdnZXRVc2VyTG9nJyk7XG4gICAgfVxuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICB1cmw6IGAvdXNlcnMvY3VycmVudC9zdWJzY3JpYmVycy8ke3N1YnNjcmliZXJJZH0vdXNlci1sb2dgLFxuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgIGVuZFRpbWUsXG4gICAgICAgIHN0cmF0ZWd5SWQsIFxuICAgICAgICBwb3NpdGlvbklkLCBcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgbGltaXRcbiAgICAgIH0sXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdGhpcy5fdG9rZW5cbiAgICAgIH0sXG4gICAgICBqc29uOiB0cnVlXG4gICAgfTtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeShvcHRzLCB0cnVlKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXN1bHQubWFwKHIgPT4gci50aW1lID0gbmV3IERhdGUoci50aW1lKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBldmVudCBsb2cgZm9yIENvcHlGYWN0b3J5IHN0cmF0ZWd5LCBzb3J0ZWQgaW4gcmV2ZXJzZSBjaHJvbm9sb2dpY2FsIG9yZGVyLiBTZWVcbiAgICogaHR0cHM6Ly9tZXRhYXBpLmNsb3VkL2RvY3MvY29weWZhY3RvcnkvcmVzdEFwaS9hcGkvdHJhZGluZy9nZXRTdHJhdGVneUxvZy8gXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJhdGVneUlkIHN0cmF0ZWd5IGlkIHRvIHJldHJpZXZlIGxvZyBmb3JcbiAgICogQHBhcmFtIHtEYXRlfSBbc3RhcnRUaW1lXSB0aW1lIHRvIHN0YXJ0IGxvYWRpbmcgZGF0YSBmcm9tXG4gICAqIEBwYXJhbSB7RGF0ZX0gW2VuZFRpbWVdIHRpbWUgdG8gc3RvcCBsb2FkaW5nIGRhdGEgYXRcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtwb3NpdGlvbklkXSBwb3NpdGlvbiBpZCBmaWx0ZXJcbiAgICogQHBhcmFtIHsnREVCVUcnfCdJTkZPJ3wnV0FSTid8J0VSUk9SJ30gW2xldmVsXSBtaW5pbXVtIHNldmVyaXR5IGxldmVsXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbb2Zmc2V0XSBwYWdpbmF0aW9uIG9mZnNldC4gRGVmYXVsdCBpcyAwXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbbGltaXRdIHBhZ2luYXRpb24gbGltaXQuIERlZmF1bHQgaXMgMTAwMFxuICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PENvcHlGYWN0b3J5VXNlckxvZ01lc3NhZ2U+Pn0gcHJvbWlzZSB3aGljaCByZXNvbHZlcyB3aXRoIGxvZyByZWNvcmRzIGZvdW5kXG4gICAqL1xuICBhc3luYyBnZXRTdHJhdGVneUxvZyhzdHJhdGVneUlkLCBzdGFydFRpbWUsIGVuZFRpbWUsIHBvc2l0aW9uSWQsIGxldmVsLCBvZmZzZXQgPSAwLCBsaW1pdCA9IDEwMDApIHtcbiAgICBpZiAodGhpcy5faXNOb3RKd3RUb2tlbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlTm9BY2Nlc3NFcnJvcignZ2V0U3RyYXRlZ3lMb2cnKTtcbiAgICB9XG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIHVybDogYC91c2Vycy9jdXJyZW50L3N0cmF0ZWdpZXMvJHtzdHJhdGVneUlkfS91c2VyLWxvZ2AsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZSxcbiAgICAgICAgcG9zaXRpb25JZCxcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgbGltaXRcbiAgICAgIH0sXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhdXRoLXRva2VuJzogdGhpcy5fdG9rZW5cbiAgICAgIH0sXG4gICAgICBqc29uOiB0cnVlXG4gICAgfTtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5fZG9tYWluQ2xpZW50LnJlcXVlc3RDb3B5RmFjdG9yeShvcHRzLCB0cnVlKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXN1bHQubWFwKHIgPT4gci50aW1lID0gbmV3IERhdGUoci50aW1lKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHN0b3BvdXQgbGlzdGVuZXIgYW5kIGNyZWF0ZXMgYSBqb2IgdG8gbWFrZSByZXF1ZXN0c1xuICAgKiBAcGFyYW0ge1N0b3BvdXRMaXN0ZW5lcn0gbGlzdGVuZXIgc3RvcG91dCBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2FjY291bnRJZF0gYWNjb3VudCBpZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3N0cmF0ZWd5SWRdIHN0cmF0ZWd5IGlkXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbc2VxdWVuY2VOdW1iZXJdIHNlcXVlbmNlIG51bWJlclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IGxpc3RlbmVyIGlkXG4gICAqL1xuICBhZGRTdG9wb3V0TGlzdGVuZXIobGlzdGVuZXIsIGFjY291bnRJZCwgc3RyYXRlZ3lJZCwgc2VxdWVuY2VOdW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcG91dExpc3RlbmVyTWFuYWdlci5hZGRTdG9wb3V0TGlzdGVuZXIobGlzdGVuZXIsIGFjY291bnRJZCwgc3RyYXRlZ3lJZCwgc2VxdWVuY2VOdW1iZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgc3RvcG91dCBsaXN0ZW5lciBhbmQgY2FuY2VscyB0aGUgZXZlbnQgc3RyZWFtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsaXN0ZW5lcklkIHN0b3BvdXQgbGlzdGVuZXIgaWRcbiAgICovXG4gIHJlbW92ZVN0b3BvdXRMaXN0ZW5lcihsaXN0ZW5lcklkKSB7XG4gICAgdGhpcy5fc3RvcG91dExpc3RlbmVyTWFuYWdlci5yZW1vdmVTdG9wb3V0TGlzdGVuZXIobGlzdGVuZXJJZCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHN0cmF0ZWd5IGxvZyBsaXN0ZW5lciBhbmQgY3JlYXRlcyBhIGpvYiB0byBtYWtlIHJlcXVlc3RzXG4gICAqIEBwYXJhbSB7VXNlckxvZ0xpc3RlbmVyfSBsaXN0ZW5lciB1c2VyIGxvZyBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyYXRlZ3lJZCBzdHJhdGVneSBpZFxuICAgKiBAcGFyYW0ge0RhdGV9IFtzdGFydFRpbWVdIGxvZyBzZWFyY2ggc3RhcnQgdGltZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3Bvc2l0aW9uSWRdIHBvc2l0aW9uIGlkIGZpbHRlclxuICAgKiBAcGFyYW0geydERUJVRyd8J0lORk8nfCdXQVJOJ3wnRVJST1InfSBbbGV2ZWxdIG1pbmltdW0gc2V2ZXJpdHkgbGV2ZWxcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtsaW1pdF0gbG9nIHBhZ2luYXRpb24gbGltaXRcbiAgICogQHJldHVybiB7U3RyaW5nfSBsaXN0ZW5lciBpZFxuICAgKi9cbiAgYWRkU3RyYXRlZ3lMb2dMaXN0ZW5lcihsaXN0ZW5lciwgc3RyYXRlZ3lJZCwgc3RhcnRUaW1lLCBwb3NpdGlvbklkLCBsZXZlbCwgbGltaXQpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0xpc3RlbmVyTWFuYWdlci5hZGRTdHJhdGVneUxvZ0xpc3RlbmVyKFxuICAgICAgbGlzdGVuZXIsIFxuICAgICAgc3RyYXRlZ3lJZCwgXG4gICAgICBzdGFydFRpbWUsIFxuICAgICAgcG9zaXRpb25JZCwgXG4gICAgICBsZXZlbCwgXG4gICAgICBsaW1pdFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBzdHJhdGVneSBsb2cgbGlzdGVuZXIgYW5kIGNhbmNlbHMgdGhlIGV2ZW50IHN0cmVhbVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbGlzdGVuZXJJZCBzdHJhdGVneSBsb2cgbGlzdGVuZXIgaWRcbiAgICovXG4gIHJlbW92ZVN0cmF0ZWd5TG9nTGlzdGVuZXIobGlzdGVuZXJJZCkge1xuICAgIHRoaXMuX3VzZXJMb2dMaXN0ZW5lck1hbmFnZXIucmVtb3ZlU3RyYXRlZ3lMb2dMaXN0ZW5lcihsaXN0ZW5lcklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgc3Vic2NyaWJlciBsb2cgbGlzdGVuZXIgYW5kIGNyZWF0ZXMgYSBqb2IgdG8gbWFrZSByZXF1ZXN0c1xuICAgKiBAcGFyYW0ge1VzZXJMb2dMaXN0ZW5lcn0gbGlzdGVuZXIgdXNlciBsb2cgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN1YnNjcmliZXJJZCBzdWJzY3JpYmVyIGlkXG4gICAqIEBwYXJhbSB7RGF0ZX0gW3N0YXJ0VGltZV0gbG9nIHNlYXJjaCBzdGFydCB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyYXRlZ3lJZF0gc3RyYXRlZ3kgaWQgZmlsdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcG9zaXRpb25JZF0gcG9zaXRpb24gaWQgZmlsdGVyXG4gICAqIEBwYXJhbSB7J0RFQlVHJ3wnSU5GTyd8J1dBUk4nfCdFUlJPUid9IFtsZXZlbF0gbWluaW11bSBzZXZlcml0eSBsZXZlbFxuICAgKiBAcGFyYW0ge051bWJlcn0gW2xpbWl0XSBsb2cgcGFnaW5hdGlvbiBsaW1pdFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IGxpc3RlbmVyIGlkXG4gICAqL1xuICBhZGRTdWJzY3JpYmVyTG9nTGlzdGVuZXIobGlzdGVuZXIsIHN1YnNjcmliZXJJZCwgc3RhcnRUaW1lLCBzdHJhdGVneUlkLCBwb3NpdGlvbklkLCBsZXZlbCwgbGltaXQpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0xpc3RlbmVyTWFuYWdlci5hZGRTdWJzY3JpYmVyTG9nTGlzdGVuZXIoXG4gICAgICBsaXN0ZW5lciwgXG4gICAgICBzdWJzY3JpYmVySWQsIFxuICAgICAgc3RhcnRUaW1lLCBcbiAgICAgIHN0cmF0ZWd5SWQsIFxuICAgICAgcG9zaXRpb25JZCwgXG4gICAgICBsZXZlbCwgXG4gICAgICBsaW1pdFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBzdWJzY3JpYmVyIGxvZyBsaXN0ZW5lciBhbmQgY2FuY2VscyB0aGUgZXZlbnQgc3RyZWFtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsaXN0ZW5lcklkIHN1YnNjcmliZXIgbG9nIGxpc3RlbmVyIGlkXG4gICAqL1xuICByZW1vdmVTdWJzY3JpYmVyTG9nTGlzdGVuZXIobGlzdGVuZXJJZCkge1xuICAgIHRoaXMuX3VzZXJMb2dMaXN0ZW5lck1hbmFnZXIucmVtb3ZlU3Vic2NyaWJlckxvZ0xpc3RlbmVyKGxpc3RlbmVySWQpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJNZXRhQXBpQ2xpZW50IiwiU3Vic2NyaWJlclNpZ25hbENsaWVudCIsIlN0cmF0ZWd5U2lnbmFsQ2xpZW50IiwiU3RvcG91dExpc3RlbmVyTWFuYWdlciIsIlVzZXJMb2dMaXN0ZW5lck1hbmFnZXIiLCJUcmFkaW5nQ2xpZW50IiwicmVzeW5jaHJvbml6ZSIsImFjY291bnRJZCIsInN0cmF0ZWd5SWRzIiwicG9zaXRpb25JZHMiLCJfaXNOb3RKd3RUb2tlbiIsIl9oYW5kbGVOb0FjY2Vzc0Vycm9yIiwib3B0cyIsInVybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJfdG9rZW4iLCJwYXJhbXMiLCJzdHJhdGVneUlkIiwicG9zaXRpb25JZCIsImpzb24iLCJfZG9tYWluQ2xpZW50IiwicmVxdWVzdENvcHlGYWN0b3J5IiwiZ2V0U3Vic2NyaWJlclNpZ25hbENsaWVudCIsInN1YnNjcmliZXJJZCIsImFjY291bnREYXRhIiwiZ2V0QWNjb3VudEluZm8iLCJob3N0IiwiZ2V0U2lnbmFsQ2xpZW50SG9zdCIsInJlZ2lvbnMiLCJpZCIsImdldFN0cmF0ZWd5U2lnbmFsQ2xpZW50Iiwic3RyYXRlZ3kiLCJfY29uZmlndXJhdGlvbkNsaWVudCIsImdldFN0cmF0ZWd5IiwiZ2V0U3RvcG91dHMiLCJyZXNldFN1YnNjcmlwdGlvblN0b3BvdXRzIiwicmVhc29uIiwicmVzZXRTdWJzY3JpYmVyU3RvcG91dHMiLCJnZXRVc2VyTG9nIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImxldmVsIiwib2Zmc2V0IiwibGltaXQiLCJyZXN1bHQiLCJtYXAiLCJyIiwidGltZSIsIkRhdGUiLCJnZXRTdHJhdGVneUxvZyIsImFkZFN0b3BvdXRMaXN0ZW5lciIsImxpc3RlbmVyIiwic2VxdWVuY2VOdW1iZXIiLCJfc3RvcG91dExpc3RlbmVyTWFuYWdlciIsInJlbW92ZVN0b3BvdXRMaXN0ZW5lciIsImxpc3RlbmVySWQiLCJhZGRTdHJhdGVneUxvZ0xpc3RlbmVyIiwiX3VzZXJMb2dMaXN0ZW5lck1hbmFnZXIiLCJyZW1vdmVTdHJhdGVneUxvZ0xpc3RlbmVyIiwiYWRkU3Vic2NyaWJlckxvZ0xpc3RlbmVyIiwicmVtb3ZlU3Vic2NyaWJlckxvZ0xpc3RlbmVyIiwiY29uc3RydWN0b3IiLCJkb21haW5DbGllbnQiLCJjb25maWd1cmF0aW9uQ2xpZW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsT0FBT0EsbUJBQW1CLG9CQUFvQjtBQUM5QyxPQUFPQyw0QkFBNEIsNEJBQTRCO0FBQy9ELE9BQU9DLDBCQUEwQiwwQkFBMEI7QUFDM0QsT0FBT0MsNEJBQTRCLHFDQUFxQztBQUN4RSxPQUFPQyw0QkFBNEIscUNBQXFDO0FBTXpELElBQUEsQUFBTUMsZ0JBQU4sTUFBTUEsc0JBQXNCTDtJQWV6Qzs7Ozs7Ozs7O0dBU0MsR0FDRCxBQUFNTSxjQUFjQyxTQUFTLEVBQUVDLFdBQVcsRUFBRUMsV0FBVzs7ZUFBdkQsb0JBQUEsWUFBeUQ7WUFDdkQsSUFBSSxNQUFLQyxjQUFjLElBQUk7Z0JBQ3pCLE9BQU8sTUFBS0Msb0JBQW9CLENBQUM7WUFDbkMsQ0FBQztZQUNELE1BQU1DLE9BQU87Z0JBQ1hDLEtBQUssQ0FBQywyQkFBMkIsRUFBRU4sVUFBVSxjQUFjLENBQUM7Z0JBQzVETyxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGNBQWMsTUFBS0MsTUFBTTtnQkFDM0I7Z0JBQ0FDLFFBQVE7b0JBQ05DLFlBQVlWO29CQUNaVyxZQUFZVjtnQkFDZDtnQkFDQVcsTUFBTSxJQUFJO1lBQ1o7WUFDQSxPQUFPLE1BQUtDLGFBQWEsQ0FBQ0Msa0JBQWtCLENBQUNWO1FBQy9DOztJQUVBOzs7R0FHQyxHQUNELEFBQU1XLDBCQUEwQkMsWUFBWTs7ZUFBNUMsb0JBQUEsWUFBOEM7WUFDNUMsSUFBSSxNQUFLZCxjQUFjLElBQUk7Z0JBQ3pCLE9BQU8sTUFBS0Msb0JBQW9CLENBQUM7WUFDbkMsQ0FBQztZQUVELElBQUljLGNBQWMsTUFBTSxNQUFLSixhQUFhLENBQUNLLGNBQWMsQ0FBQ0Y7WUFDMUQs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